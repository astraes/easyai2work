"use strict";const e=require("../utils/request.js"),t=require("../stores/appStore.js"),r=require("../common/vendor.js"),s=require("../types/event.types.js"),o=require("../utils/emitter.js"),p=()=>t.useAppStore().getUser(),u=r.computed((()=>{const{user:e}=r.storeToRefs(t.useAppStore());return!!e.value.refresh_token}));exports.creatOrder=t=>e.request("/pay/order",{method:"POST",data:t}),exports.getApps=()=>e.request("workflow/getAllWorkflowApps/mp"),exports.getLoginInfo=p,exports.getOrderInfoById=t=>e.request("/pay/query",{method:"POST",data:{_id:t}}),exports.getPageContent=()=>e.request("content/mp/content"),exports.getPrePay=t=>e.request(`pay/prePay/${t}`),exports.getProductList=()=>e.request("/product"),exports.getUserVipInfo=()=>e.request("/member/topLevel",{method:"POST"}),exports.isLogin=u,exports.loginByUsername=t=>e.request("/users/loginByUsername",{method:"POST",data:t}),exports.loginByWechatCode=t=>e.request(`auth/loginByWechatMiniProgram?code=${t}`),exports.loginOut=()=>{t.useAppStore().clearUser(),o.emit(s.EventType.AUTH_LOGOUT,null)},exports.refreshUserInfo=(r=p())=>e.request(`/users/${r._id}`).then((e=>{t.useAppStore().setUser(e)})),exports.saveLoginInfo=e=>t.useAppStore().setUser(e),exports.updateUserInfo=t=>e.request("/users/update",{method:"POST",data:t});
