"use strict";const e=require("../../../common/vendor.js"),t=require("../../../composables/useWorkFlow.js"),n=require("../../../types/index.js"),o=require("../../../stores/appStore.js"),a=require("../../../utils/common.js");if(!Array){(e.resolveComponent("fui-icon")+e.resolveComponent("fui-nav-bar")+e.resolveComponent("up-status-bar")+e.resolveComponent("up-button"))()}Math||((()=>"../../../components/firstui/fui-icon/fui-icon.js")+(()=>"../../../components/firstui/fui-nav-bar/fui-nav-bar.js")+g+(()=>"../../../node-modules/uview-plus/components/u-status-bar/u-status-bar.js")+d+r+s+c+l+m+y+f+p+v+i+(()=>"../../../node-modules/uview-plus/components/u-button/u-button.js")+b+x+u)();const u=()=>"../../../layouts/BaseLayout.js",s=()=>"../../../components/dynamic/ImageUpload.js",i=()=>"../../../components/dynamic/MoreImageUpload.js",r=()=>"../../../components/dynamic/AudioUpload.js",l=()=>"../../../components/dynamic/Height.js",m=()=>"../../../components/dynamic/Positive.js",f=()=>"../../../components/dynamic/Picker.js",p=()=>"../../../components/dynamic/CustomNumberBox.js",c=()=>"../../../components/dynamic/Width.js",d=()=>"../../../components/dynamic/Seed.js",v=()=>"../../../components/dynamic/ImageSelectPreview.js",y=()=>"../../../components/dynamic/ModeSelect.js",g=()=>"../../../components/TaskProgress.js",b=()=>"../../../node-modules/@tuniao/tnui-vue3-uniapp/components/icon/src/icon.js",x=()=>"../../../components/common/DragButton2.js",j=e.defineComponent({__name:"apps",setup(u){const{workflow:s,handleGetWorkFlwById:i,workFlowParamLists:r,bindParam:l,params_component_list:m,socketInit:f,handleFindComponentName:p,handleSubmitTaskTask:c}=t.useWorkFlow();console.log("-------------bindParam----------------",l.value);const d=e.ref("");e.onLoad((async()=>{const e=getCurrentPages().pop(),t=null==e?void 0:e.options;d.value=t.id,i(t.id).then((()=>console.log(s.value))),f({params:{type:n.IWebsocketSceneType.drawProcessPush}})}));const v=e.ref(!1),y=e.ref("空闲"),{localTasks:g}=e.storeToRefs(o.useAppStore()),b=e.computed((()=>{const e=g.value.find((e=>4===e.status));return e?e.progress+"%":y.value})),x=e.ref({x:0,y:0}),j=e.ref([]),k=async()=>{if(console.log("seedRef.value",w.value),w.value&&w.value.length>0)for(const e of w.value)e.getSeed();c(),console.log("handleSubmitTaskTask",c);const t=a.randomId(5);j.value.push({key:t,id:"addBtn",left:0,top:0,y:0,x:0}),await e.nextTick$1();const n=e.index.createSelectorQuery().select("#submit-btn");e.index.createSelectorQuery().select("#cartBtn"),n.boundingClientRect().exec((n=>{j.value.some((e=>e.key===t&&(e.top=n[0].top,e.left=n[0].left+n[0].width/2,!0))),e.nextTick$1((()=>{let e={x:0,y:0};e=x.value.x>300?{x:x.value.x-50,y:x.value.y}:{x:x.value.x,y:x.value.y},j.value.some((o=>o.key===t&&(o.y=e.y-n[0].top,o.x=e.x-n[0].left-n[0].width/2,setTimeout((()=>{j.value.splice(j.value.findIndex((e=>e.key===t)),1)}),500),!0)))}))}))},h=()=>{v.value=!v.value,1==v.value?y.value="返回":y.value="空闲"},w=e.ref([]);function P(){e.index.redirectTo({url:"/pages/index/index"})}function S(e){return e?/\.(jpg|jpeg|png|gif|bmp)$/i.test(e)?(console.log("==============","是图片"),1):/\.(mp3|wav|ogg)$/i.test(e)?(console.log("==============","是音频"),2):void 0:(console.log("==============","是空值"),0)}return(t,n)=>e.e({a:e.p({name:"arrowleft"}),b:e.o(P),c:e.p({title:e.unref(s).title}),d:v.value},v.value?{e:e.o((e=>v.value=e)),f:e.p({modelValue:v.value})}:{},{g:e.f(e.unref(r),((t,n,o)=>e.e({a:"Seed"===e.unref(p)(t.name)},"Seed"===e.unref(p)(t.name)?{b:e.sr(w,"689529f4-5-"+o+",689529f4-3",{k:"seedRef",f:1}),c:"689529f4-5-"+o+",689529f4-3",d:e.o((n=>e.unref(l)[t.name]=n)),e:e.p({title:t.title,options:t.attributes,modelValue:e.unref(l)[t.name]})}:"ImageUpload"===e.unref(p)(t.name)?e.e({g:2==S(t.param)},2==S(t.param)?{h:"689529f4-6-"+o+",689529f4-3",i:e.o((n=>e.unref(l)[t.name]=n)),j:e.p({title:t.title,options:t.attributes,modelValue:e.unref(l)[t.name]})}:{k:"689529f4-7-"+o+",689529f4-3",l:e.o((n=>e.unref(l)[t.name]=n)),m:e.p({title:t.title,options:t.attributes,modelValue:e.unref(l)[t.name]})}):"Width"===e.unref(p)(t.name)?{o:"689529f4-8-"+o+",689529f4-3",p:e.o((n=>e.unref(l)[t.name]=n)),q:e.p({title:t.title,options:t.attributes,modelValue:e.unref(l)[t.name]})}:"Height"===e.unref(p)(t.name)?{s:"689529f4-9-"+o+",689529f4-3",t:e.o((n=>e.unref(l)[t.name]=n)),v:e.p({title:t.title,options:t.attributes,modelValue:e.unref(l)[t.name]})}:"Positive"===e.unref(p)(t.name)?{x:"689529f4-10-"+o+",689529f4-3",y:e.o((n=>e.unref(l)[t.name]=n)),z:e.p({title:t.title,options:t.attributes,modelValue:e.unref(l)[t.name]})}:"ModeSelect"===e.unref(p)(t.name)?{B:"689529f4-11-"+o+",689529f4-3",C:e.o((n=>e.unref(l)[t.name]=n)),D:e.p({title:t.title,workflow_id:e.unref(s)._id,options:t.attributes,modelValue:e.unref(l)[t.name]})}:"Picker"===e.unref(p)(t.name)?{F:"689529f4-12-"+o+",689529f4-3",G:e.o((n=>e.unref(l)[t.name]=n)),H:e.p({title:t.title,options:t.attributes,modelValue:e.unref(l)[t.name]})}:"CustomNumberBox"===e.unref(p)(t.name)?{J:"689529f4-13-"+o+",689529f4-3",K:e.o((n=>e.unref(l)[t.name]=n)),L:e.p({title:t.title,options:t.attributes,modelValue:e.unref(l)[t.name]})}:"ImageSelectPreview"===e.unref(p)(t.name)?{N:"689529f4-14-"+o+",689529f4-3",O:e.o((n=>e.unref(l)[t.name]=n)),P:e.p({title:t.title,options:t.attributes,modelValue:e.unref(l)[t.name]})}:e.e({Q:"custom_batch_image_path_origin"==t.name},"custom_batch_image_path_origin"==t.name?{R:"689529f4-15-"+o+",689529f4-3",S:e.o((n=>e.unref(l)[t.name]=n)),T:e.p({title:t.title,options:t.attributes,modelValue:e.unref(l)[t.name]})}:{}),{f:"ImageUpload"===e.unref(p)(t.name),n:"Width"===e.unref(p)(t.name),r:"Height"===e.unref(p)(t.name),w:"Positive"===e.unref(p)(t.name),A:"ModeSelect"===e.unref(p)(t.name),E:"Picker"===e.unref(p)(t.name),I:"CustomNumberBox"===e.unref(p)(t.name),M:"ImageSelectPreview"===e.unref(p)(t.name)}))),h:e.o(k),i:e.p({icon:"edit-pen",type:"primary",shape:"circle"}),j:e.f(j.value,((e,t,n)=>({a:"689529f4-17-"+n+",689529f4-3",b:e.key,c:`${e.top}px`,d:`${e.left}px`,e:`translate(${e.x}px, ${e.y}px)`}))),k:e.p({name:"rocket",size:"40rpx"}),l:e.t(b.value),m:e.o(h),n:e.o((e=>x.value=e)),o:e.p({modelValue:x.value})})}}),k=e._export_sfc(j,[["__scopeId","data-v-689529f4"]]);wx.createPage(k);
