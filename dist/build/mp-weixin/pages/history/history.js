"use strict";const t=require("../../common/vendor.js"),e=require("../../utils/request.js"),a=require("../../utils/common.js");if(!Array){t.resolveComponent("up-status-bar")()}Math||((()=>"../../node-modules/uview-plus/components/u-status-bar/u-status-bar.js")+c+n+s+o+u+l+i+p)();const u=()=>"../../node-modules/tnuiv3p-tn-time-line/time-line.js",o=()=>"../../node-modules/tnuiv3p-tn-time-line/time-line-item.js",s=()=>"../../node-modules/tnuiv3p-tn-time-line/time-line-data.js",n=()=>"../../node-modules/@tuniao/tnui-vue3-uniapp/components/photo-album/src/photo-album.js",i=()=>"../../node-modules/@tuniao/tnui-vue3-uniapp/components/switch-tab/src/switch-tab.js",l=()=>"../../node-modules/@tuniao/tnui-vue3-uniapp/components/lazy-load/src/lazy-load.js",p=()=>"../../layouts/BaseLayout.js",c=()=>"../../node-modules/@tuniao/tnui-vue3-uniapp/components/tag/src/tag.js",r=t.defineComponent({__name:"history",setup(u){t.onLoad((()=>{s()}));const o=t.ref([]),s=async t=>{const{items:a}=await e.request(`/draw/history/${t}`);o.value=a,console.log("historyData",o.value)},n=t.computed((()=>{const t=[];return o.value.forEach((e=>{const u=a.formatDateTime(new Date(e.created_at),"YYYY-MM-DD"),o=t.find((t=>t.day===u));o?o.data=[...o.data,e]:t.push({day:u,icon:"creative",data:[e]})})),console.log("tempTimeLineData:",t),t.sort(((t,e)=>new Date(e.day).getTime()-new Date(t.day).getTime()))})),i=t.computed((()=>{let t=[];return o.value.forEach((e=>{e.output&&(t=[...t,...e.output])})),t})),l=t.ref(0),p=t.ref(["时间轴模式","相册模式"]);return(e,a)=>t.e({a:0===l.value},0===l.value?{b:t.f(n.value,((e,a,u)=>({a:t.f(e.data,((e,a,o)=>{var s;return t.e({a:1===e.status},1===e.status?{b:"022862fb-7-"+u+"-"+o+",022862fb-6-"+u+"-"+o,c:t.p({type:"success",shape:"circle"})}:2===e.status||+e.created_at<Date.now()-864e5?{e:"022862fb-8-"+u+"-"+o+",022862fb-6-"+u+"-"+o,f:t.p({type:"danger",shape:"circle"})}:0===e.status?{h:"022862fb-9-"+u+"-"+o+",022862fb-6-"+u+"-"+o,i:t.p({type:"success",shape:"circle"})}:3===e.status?{k:"022862fb-10-"+u+"-"+o+",022862fb-6-"+u+"-"+o,l:t.p({type:"warning",shape:"circle"})}:{},{d:2===e.status||+e.created_at<Date.now()-864e5,g:0===e.status,j:3===e.status,m:(null==e?void 0:e.output)&&e.output.length>0},(null==e?void 0:e.output)&&e.output.length>0?{n:"022862fb-11-"+u+"-"+o+",022862fb-6-"+u+"-"+o,o:t.p({data:e.output,column:e.output.length>4?4:e.output.length})}:{},{p:t.t(null==(s=e.params)?void 0:s.positive),q:a,r:"022862fb-6-"+u+"-"+o+",022862fb-5-"+u})})),b:a,c:"022862fb-5-"+u+",022862fb-4",d:t.p({title:e.day,"title-icon":void 0!==e.icon?e.icon:""})})))}:{},{c:1===l.value},1===l.value?{d:t.f(i.value,((e,a,u)=>({a:"022862fb-12-"+u+",022862fb-3",b:t.p({width:"100%",height:"300",src:e})})))}:{},{e:t.o((t=>l.value=t)),f:t.p({tabs:p.value,modelValue:l.value})})}}),d=t._export_sfc(r,[["__scopeId","data-v-022862fb"]]);wx.createPage(d);
